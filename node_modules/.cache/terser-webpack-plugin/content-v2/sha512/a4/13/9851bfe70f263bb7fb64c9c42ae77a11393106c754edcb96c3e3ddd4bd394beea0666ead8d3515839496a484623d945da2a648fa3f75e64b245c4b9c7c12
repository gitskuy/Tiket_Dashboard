{"code":"!function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:o})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&r&&\"string\"!=typeof t)for(var n in t)e.d(o,n,function(e){return t[e]}.bind(null,n));return o},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\"a\",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=\"\",e(e.s=1)}([function(t,e){!function(t){\"use strict\";function e(t){return t.charAt(0).toUpperCase()+t.slice(1)}function r(t,e){var r=[];return function t(e,o){if(e===o)return!0;if(e instanceof Date&&o instanceof Date)return+e==+o;if(\"object\"!==(void 0===e?\"undefined\":i(e))||\"object\"!==(void 0===o?\"undefined\":i(o)))return!1;if(function(t,e){for(var o=r.length;o--;)if(!(r[o][0]!==t&&r[o][0]!==e||r[o][1]!==e&&r[o][1]!==t))return!0;return!1}(e,o))return!0;r.push([e,o]);var n=Object.keys(e),a=n.length;if(Object.keys(o).length!==a)return!1;for(;a--;)if(!t(e[n[a]],o[n[a]]))return!1;return!0}(t,e)}function o(t){return 0===t.filter(function(t){return![].concat(p,[\"default\"]).includes(t)}).length}function n(t,r){var o=e(t);return r?\"Placemark\"===o?\"Point\":\"Polyline\"===o?\"LineString\":o:o}function a(t,e){var r=e?{type:\"Feature\",id:t.properties.markerId,geometry:{type:t.markerType,coordinates:t.coords},properties:t.properties,options:t.options}:new ymaps[t.markerType](t.coords,t.properties,t.options);return r.clusterName=t.clusterName,e||function(t,e){if(t&&\"object\"===(void 0===t?\"undefined\":i(t)))for(var r in t)e.events.add(r,t[r])}(t.callbacks,r),r}var i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},s=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")},c=function(){function t(t,e){for(var r,o=0;o<e.length;o++)(r=e[o]).enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),l=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},u=new(function(){function t(){s(this,t),this.events={},this.ymapReady=!1,this.scriptIsNotAttached=!0}return c(t,[{key:\"$on\",value:function(t,e){var r=this;return this.events[t]||(this.events[t]=[]),this.events[t].push(e),function(){r.events[t]=r.events[t].filter(function(t){return e!==t})}}},{key:\"$emit\",value:function(t,e){var r=this.events[t];r&&r.forEach(function(t){return t(e)})}}]),t}()),p=[\"fullscreenControl\",\"geolocationControl\",\"routeEditor\",\"rulerControl\",\"searchControl\",\"trafficControl\",\"typeSelector\",\"zoomControl\"],m={data:function(){return{ymapEventBus:u,ymapId:\"yandexMap\"+Math.round(1e5*Math.random()),myMap:{},style:this.ymapClass?\"\":\"width: 100%; height: 100%;\"}},props:{coords:{type:Array,validator:function(t){return!t.filter(function(t){return isNaN(t)}).length},required:!0},zoom:{validator:function(t){return!isNaN(t)},default:18},clusterOptions:{type:Object,default:function(){return{}}},clusterCallbacks:{type:Object,default:function(){return{}}},behaviors:{type:Array,default:function(){return[\"default\"]}},controls:{type:Array,default:function(){return[\"default\"]},validator:function(t){return o(t)}},detailedControls:{type:Object,validator:function(t){return o(Object.keys(t))}},scrollZoom:{type:Boolean,default:!0},zoomControl:Object,mapType:{type:String,default:\"map\",validator:function(t){return[\"map\",\"satellite\",\"hybrid\"].includes(t)}},placemarks:{type:Array,default:function(){return[]}},useObjectManager:{type:Boolean,default:!1},objectManagerClusterize:{type:Boolean,default:!0},ymapClass:String,initWithoutMarkers:{type:Boolean,default:!0},mapLink:String},computed:{coordinates:function(){return this.coords.map(function(t){return+t})}},methods:{init:function(){var t=this;if(window.ymaps&&ymaps.GeoObjectCollection&&(this.initWithoutMarkers||this.$slots.default||this.placemarks.length)){this.$emit(\"map-initialization-started\");for(var r=[],o=this.$slots.default&&this.$slots.default.map(function(t){var e=t.componentOptions&&t.componentOptions.propsData;if(e){var r={};e.balloonTemplate&&(r={balloonContentLayout:ymaps.templateLayoutFactory.createClass(e.balloonTemplate)});var o={markerId:e.markerId,markerType:e.markerType,coords:function t(e){return e.map(function(e){return Array.isArray(e)?t(e):+e})}(e.coords),hintContent:e.hintContent,markerFill:e.markerFill,circleRadius:+e.circleRadius,clusterName:e.clusterName,markerStroke:e.markerStroke,balloon:e.balloon,callbacks:e.callbacks,properties:e.properties,options:e.options,balloonOptions:r};return e.icon&&\"default#image\"===e.icon.layout?(o.iconLayout=e.icon.layout,o.iconImageHref=e.icon.imageHref,o.iconImageSize=e.icon.imageSize,o.iconImageOffset=e.icon.imageOffset):o.icon=e.icon,o}}).filter(function(t){return t&&t.markerType})||[],i=0;i<o.length;i++){var s=o[i],c=n(s.markerType,this.useObjectManager),u={hintContent:s.hintContent,iconContent:s.icon&&s.icon.content,markerId:s.markerId},p=s.balloon?{balloonContentHeader:s.balloon.header,balloonContentBody:s.balloon.body,balloonContentFooter:s.balloon.footer}:{},m=Object.assign(u,p,s.properties),f=s.iconLayout?{iconLayout:s.iconLayout,iconImageHref:s.iconImageHref,iconImageSize:s.iconImageSize,iconImageOffset:s.iconImageOffset}:{preset:s.icon&&\"islands#\"+(v=s,(v.icon.color||\"blue\")+(v.icon.glyph?e(v.icon.glyph):v.icon.content?\"Stretchy\":\"\"))+\"Icon\"},d=s.markerStroke?{strokeColor:s.markerStroke.color||\"0066ffff\",strokeOpacity:0<=parseFloat(s.markerStroke.opacity)?parseFloat(s.markerStroke.opacity):1,strokeStyle:s.markerStroke.style,strokeWidth:0<=parseFloat(s.markerStroke.width)?parseFloat(s.markerStroke.width):1}:{},y=s.markerFill?{fill:s.markerFill.enabled||!0,fillColor:s.markerFill.color||\"0066ff99\",fillOpacity:0<=parseFloat(s.markerFill.opacity)?parseFloat(s.markerFill.opacity):1,fillImageHref:s.markerFill.imageHref||\"\"}:{},h=Object.assign(f,d,y,s.balloonOptions,s.options);\"Circle\"===c&&(s.coords=[s.coords,s.circleRadius]);var b=a({properties:m,options:h,markerType:c,coords:s.coords,clusterName:s.clusterName,callbacks:s.callbacks},this.useObjectManager);r.push(b)}var v;if(this.placemarks){var k=this.useObjectManager?\"Point\":\"Placemark\";this.placemarks.forEach(function(e){var o=e.properties,n=e.options,i=void 0===n?{}:n,s=e.coords,c=e.clusterName,l=e.callbacks,u=e.balloonTemplate;if(u){var p=ymaps.templateLayoutFactory.createClass(u);i.balloonContentLayout=p}var m=a({properties:o,options:i,markerType:k,coords:s,clusterName:c,callbacks:l},t.useObjectManager);r.push(m)})}this.myMap=new ymaps.Map(this.ymapId,{center:this.coordinates,zoom:+this.zoom,behaviors:this.behaviors,controls:this.controls,type:\"yandex#\"+this.mapType}),this.zoomControl&&(this.myMap.controls.remove(\"zoomControl\"),this.myMap.controls.add(new ymaps.control.ZoomControl(this.zoomControl))),this.detailedControls&&Object.keys(this.detailedControls).forEach(function(e){t.myMap.controls.remove(e),t.myMap.controls.add(e,t.detailedControls[e])}),!1===this.scrollZoom&&this.myMap.behaviors.disable(\"scrollZoom\");var g={options:this.clusterOptions,callbacks:this.clusterCallbacks,map:this.myMap,useObjectManager:this.useObjectManager,objectManagerClusterize:this.objectManagerClusterize};!function(t,e){var r,o=e.options,n=e.callbacks,a=e.map,i=e.useObjectManager,s=e.objectManagerClusterize,c={},u=[],p=!0,m=!1;try{for(var f,d,y=t[Symbol.iterator]();!(p=(f=y.next()).done);p=!0)(d=f.value).clusterName?c[d.clusterName]=c[d.clusterName]?[].concat(l(c[d.clusterName]),[d]):[d]:u.push(d)}catch(i){m=!0,r=i}finally{try{!p&&y.return&&y.return()}finally{if(m)throw r}}for(var h in c){var b=o[h]||{},v=n[h]||{},k=b.layout||\"\\n      <div>{{ properties.balloonContentHeader }}</div>\\n      <div>{{ properties.balloonContentBody }}</div>\\n      <div>{{ properties.balloonContentFooter }}</div>\\n    \";if(b.clusterBalloonItemContentLayout=ymaps.templateLayoutFactory.createClass(k),i){var g=new ymaps.ObjectManager(Object.assign({clusterize:s},b));for(var O in v)g.clusters.events.add(O,v[O]);g.add(c[h]),a.geoObjects.add(g)}else{var C=new ymaps.Clusterer(b);for(var j in v)C.events.add(j,v[j]);C.add(c[h]),a.geoObjects.add(C)}}if(u.length){var M=i?new ymaps.ObjectManager({clusterize:!1}):new ymaps.GeoObjectCollection;u.forEach(function(t){return M.add(t)}),a.geoObjects.add(M)}}(r,g),this.$emit(\"map-was-initialized\",this.myMap)}}},watch:{coordinates:function(t){this.myMap.panTo&&this.myMap.panTo(t)},placemarks:function(){window.ymaps&&(this.myMap.destroy&&this.myMap.destroy(),this.init())},zoom:function(){this.myMap.setZoom(this.zoom)}},render:function(t){return t(\"section\",{class:\"ymap-container\"},[t(\"div\",{attrs:{id:this.ymapId,class:this.ymapClass,style:this.style}}),t(\"div\",{attrs:{class:\"ymap-markers\"}},[this.$slots.default])])},mounted:function(){var t=this;if(this.observer=new MutationObserver(function(){this.myMap.destroy&&this.myMap.destroy(),this.init()}.bind(this)),this.observer.observe(document.querySelector(\".ymap-markers\"),{attributes:!0,childList:!0,characterData:!0,subtree:!0}),this.ymapEventBus.scriptIsNotAttached){var e=document.createElement(\"SCRIPT\"),r=this.mapLink||\"https://api-maps.yandex.ru/2.1/?lang=ru_RU\";e.setAttribute(\"src\",r),e.setAttribute(\"async\",\"\"),e.setAttribute(\"defer\",\"\"),document.body.appendChild(e),this.ymapEventBus.scriptIsNotAttached=!1,e.onload=function(){t.ymapEventBus.ymapReady=!0,t.ymapEventBus.$emit(\"scriptIsLoaded\")}}this.ymapEventBus.ymapReady?ymaps.ready(this.init):this.ymapEventBus.$on(\"scriptIsLoaded\",function(){t.ymapEventBus.initMap=function(){t.myMap.destroy(),t.init()},ymaps.ready(t.init)})},beforeDestroy:function(){this.myMap.geoObjects&&this.myMap.geoObjects.removeAll(),this.observer.disconnect()}},f={data:function(){return{ymapEventBus:u,unwatchArr:[]}},props:{coords:{type:Array,required:!0},hintContent:String,icon:Object,balloon:Object,markerType:{type:String,required:!0},markerFill:Object,markerStroke:Object,clusterName:String,circleRadius:{validator:function(t){return!isNaN(t)},default:1e3},callbacks:Object,balloonTemplate:String,markerId:{type:[String,Number],required:!0},properties:Object,options:Object},render:function(){},mounted:function(){var t=this;for(var e in this.$props)this.unwatchArr.push(this.$watch(e,function(e,o){return n=e,a=o,i=t.ymapEventBus,void(r(n,a)||(i.rerender&&clearTimeout(i.rerender),i.rerender=setTimeout(function(){return i.initMap&&i.initMap()},10)));var n,a,i}))},beforeDestroy:function(){this.unwatchArr.forEach(function(t){return t()})}};m.install=function(t){t.component(\"yandex-map\",m),t.component(\"ymap-marker\",f)},\"undefined\"!=typeof window&&window.Vue&&window.Vue.use(m),t.yandexMap=m,t.ymapMarker=f,t.default=m,Object.defineProperty(t,\"__esModule\",{value:!0})}(e)},function(t,e,r){\"use strict\";r.r(e);var o=r(0),n=r.n(o);console.log(n.a)}]);","extractedComments":[]}